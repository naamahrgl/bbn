---
// src/layouts/BaseLayout.astro
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import '../styles/global.css'

const { currentPageName } = Astro.props;
const lang = Astro.url.searchParams.get('lang') ?? 'he';
---

<html lang={lang} dir={lang === 'he' ? 'rtl' : 'ltr'}>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{currentPageName} | לחם נעמה</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Google Analytics -->
    <script is:inline>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'G-4DGPPTPLHN');
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>

    <!-- Meta Pixel -->
    <script is:inline>
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod ?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '1649331845763674');
      fbq('track', 'PageView');
    </script>
    <noscript>
      <img height="1" width="1" style="display:none"
        src="https://www.facebook.com/tr?id=123456789012345&ev=PageView&noscript=1" />
    </noscript>

    <style>

      html {
        box-sizing: border-box;
      }

      *, *::before, *::after {
        box-sizing: inherit;
      }

      body {
        font-family: 'Heebo', sans-serif;
        background-color: var(--brand-background);
        margin: 0;
        padding: 0;
        line-height: 1.5;
        font-size: 1rem;
      }

      .font-serif {
        font-family: 'Heebo', sans-serif;
        font-weight: 700;
      }

      .text-brand-dark { color: var(--brand-text-dark); }
      .text-brand-light { color: var(--brand-text-light); }
      .text-brand-primary { color: var(--brand-primary); }
      .text-brand-secondary { color: var(--brand-secondary); }

      .bg-brand-primary { background-color: var(--brand-primary); }
      .bg-brand-secondary { background-color: var(--brand-secondary); }
      .bg-brand-background { background-color: var(--brand-background); }

      .lang-toggle {
        position: fixed;
        top: 0.75rem;
        left: 1rem;
        z-index: 50;
      }

      .lang-toggle a {
        margin-left: 0.5rem;
        text-decoration: none;
        color: var(--brand-secondary);
        font-weight: bold;
        font-size: 0.875rem;
      }
    </style>
  </head>

  <body>
    <div class="min-h-screen flex flex-col bg-brand-background font-sans">
      <Header />

      <main class="flex-grow"  style="padding-top: var(--header-height)">
        <slot />
      </main>
      <Footer />
    </div>
  </body>
</html>
